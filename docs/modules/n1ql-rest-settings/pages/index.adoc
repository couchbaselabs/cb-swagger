= Query Settings REST API
:keywords: OpenAPI, REST
:specDir: partial$
:snippetDir: partial$paths/
:page-topic-type: reference
:page-toclevels: 2
include::partial$header-attributes.adoc[opts=optional]

[comment]
This file is created automatically by OpenAPI Generator.
DO NOT EDIT! See https://github.com/couchbase/cb-swagger

:leveloffset: 1

include::{specDir}overview/document-before.adoc[opts=optional]


[[overview]]
= Overview

:leveloffset: +1

// markup not found, no include::{specDir}overview/document-begin.adoc[opts=optional]


[markdown]
--
The Query Settings REST API is provided by the Query service.
This API enables you to view or specify cluster-level Query settings.
--

[discrete#version]
= Version information
[%hardbreaks]
__Version__ : 7.6

[discrete#host]
= Host information

....
{scheme}://{host}:{port}
....

[markdown]
--
The URL scheme, host, and port are as follows.
--

[cols="20,80"]
|===
| Component | Description

a| *scheme*
a| [markdown]
--
The URL scheme. Use `https` for secure access.
--

[%hardbreaks]
*Values:* `http`, `https`
*Example:* `pass:c[http]`
// end

a| *host*
a| [markdown]
--
The host name or IP address of a node running the Query service.
--

[%hardbreaks]

*Example:* `pass:c[localhost]`
// end

a| *port*
a| [markdown]
--
The Cluster administration REST port. Use `18091` for secure access.  Note that the port numbers for this REST API are different to the port numbers used by the other Query REST APIs.
--

[%hardbreaks]
*Values:* `8091`, `18091`
*Example:* `pass:c[8091]`
// end

|===


// markup not found, no include::{specDir}overview/document-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}overview/document-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/document-before.adoc[opts=optional]


[[resources]]
= Resources

:count-apis: 1

:leveloffset: +1

// markup not found, no include::{specDir}paths/document-begin.adoc[opts=optional]


This section describes the operations available with this REST API.
ifeval::[{count-apis} > 1]
The operations are grouped in the following categories.

[%hardbreaks]
<<tag-Default>>
endif::[]


ifeval::[{count-apis} > 1]
[#tag-Default]
= Default
:leveloffset: +1

ifeval::["" != ""]

endif::[]
ifeval::["" == ""]
**{toc-title}**
endif::[]
endif::[]

[%hardbreaks]
<<get_access>>
<<get_settings>>
<<post_access>>
<<post_settings>>



// markup not found, no include::{specDir}paths/get_access/operation-before.adoc[opts=optional]


[#get_access]
= Retrieve CURL Access List

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_access/operation-begin.adoc[opts=optional]


....
GET /settings/querySettings/curlWhitelist
....



// markup not found, no include::{specDir}paths/get_access/operation-description-before.adoc[opts=optional]


[#get_access-description]
= Description

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_access/operation-description-begin.adoc[opts=optional]


[markdown]
--
Returns the cluster-level CURL access settings only.
--


// markup not found, no include::{specDir}paths/get_access/operation-description-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_access/operation-description-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_access/operation-parameters-before.adoc[opts=optional]






// markup not found, no include::{specDir}paths/get_access/operation-parameters-after.adoc[opts=optional]


[#get_access-produces]
= Produces

* application/json



// markup not found, no include::{specDir}paths/get_access/operation-responses-before.adoc[opts=optional]


[#get_access-responses]
= Responses

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_access/operation-responses-begin.adoc[opts=optional]


[cols="20,60,20"]
|===
| HTTP Code | Description | Schema

| 200
a| [markdown]
--
An object determining which URLs may be accessed by the `CURL()` function.
--
a| <<Access>>



|===


// markup not found, no include::{specDir}paths/get_access/operation-responses-end.adoc[opts=optional]

:leveloffset: -1



// markup not found, no include::{specDir}paths/get_access/operation-responses-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_access/operation-security-before.adoc[opts=optional]


[#get_access-security]
= Security

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_access/operation-security-begin.adoc[opts=optional]


[cols="20,80"]
|===
| Type | Name

| http (basic)
| <<security-default>>

|===


// markup not found, no include::{specDir}paths/get_access/operation-security-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_access/operation-security-after.adoc[opts=optional]



include::{snippetDir}get_access/http-request.adoc[opts=optional]


include::{snippetDir}get_access/http-response.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_access/operation-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_access/operation-after.adoc[opts=optional]




// markup not found, no include::{specDir}paths/get_settings/operation-before.adoc[opts=optional]


[#get_settings]
= Retrieve Cluster-Level Query Settings

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_settings/operation-begin.adoc[opts=optional]


....
GET /settings/querySettings
....



// markup not found, no include::{specDir}paths/get_settings/operation-description-before.adoc[opts=optional]


[#get_settings-description]
= Description

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_settings/operation-description-begin.adoc[opts=optional]


[markdown]
--
Returns all cluster-level query settings, including the CURL access settings.
--


// markup not found, no include::{specDir}paths/get_settings/operation-description-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_settings/operation-description-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_settings/operation-parameters-before.adoc[opts=optional]






// markup not found, no include::{specDir}paths/get_settings/operation-parameters-after.adoc[opts=optional]


[#get_settings-produces]
= Produces

* application/json



// markup not found, no include::{specDir}paths/get_settings/operation-responses-before.adoc[opts=optional]


[#get_settings-responses]
= Responses

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_settings/operation-responses-begin.adoc[opts=optional]


[cols="20,60,20"]
|===
| HTTP Code | Description | Schema

| 200
a| [markdown]
--
An object giving cluster-level query settings.
--
a| <<Settings>>



|===


// markup not found, no include::{specDir}paths/get_settings/operation-responses-end.adoc[opts=optional]

:leveloffset: -1



// markup not found, no include::{specDir}paths/get_settings/operation-responses-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_settings/operation-security-before.adoc[opts=optional]


[#get_settings-security]
= Security

:leveloffset: +1

// markup not found, no include::{specDir}paths/get_settings/operation-security-begin.adoc[opts=optional]


[cols="20,80"]
|===
| Type | Name

| http (basic)
| <<security-default>>

|===


// markup not found, no include::{specDir}paths/get_settings/operation-security-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_settings/operation-security-after.adoc[opts=optional]



include::{snippetDir}get_settings/http-request.adoc[opts=optional]


include::{snippetDir}get_settings/http-response.adoc[opts=optional]



// markup not found, no include::{specDir}paths/get_settings/operation-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/get_settings/operation-after.adoc[opts=optional]




// markup not found, no include::{specDir}paths/post_access/operation-before.adoc[opts=optional]


[#post_access]
= Update CURL Access List

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_access/operation-begin.adoc[opts=optional]


....
POST /settings/querySettings/curlWhitelist
....



// markup not found, no include::{specDir}paths/post_access/operation-description-before.adoc[opts=optional]


[#post_access-description]
= Description

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_access/operation-description-begin.adoc[opts=optional]


[markdown]
--
Updates the cluster-level CURL access settings only.
--


// markup not found, no include::{specDir}paths/post_access/operation-description-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_access/operation-description-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_access/operation-parameters-before.adoc[opts=optional]


[#post_access-parameters]
= Parameters

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_access/operation-parameters-begin.adoc[opts=optional]






[#post_access-body]
.Body Parameter
{blank}

[cols="20,60,20"]
|===
|Name| Description| Schema

a| *Body* +
_optional_
a| 


[markdown]
--
An object determining which URLs may be accessed by the `CURL()` function.
--

[%hardbreaks]
{blank}

a| <<Access>>



|===


// markup not found, no include::{specDir}paths/post_access/operation-parameters-end.adoc[opts=optional]

:leveloffset: -1




// markup not found, no include::{specDir}paths/post_access/operation-parameters-after.adoc[opts=optional]


[#post_access-produces]
= Produces

* application/json

[#post_access-consumes]
= Consumes

* application/json
* application/x-www-form-urlencoded


// markup not found, no include::{specDir}paths/post_access/operation-responses-before.adoc[opts=optional]


[#post_access-responses]
= Responses

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_access/operation-responses-begin.adoc[opts=optional]


[cols="20,60,20"]
|===
| HTTP Code | Description | Schema

| 200
a| [markdown]
--
An object determining which URLs may be accessed by the `CURL()` function, including the latest changes.
--
a| <<Access>>


| 400
a| [markdown]
--
Returns an error message if a parameter or value is incorrect.
--
a| Object



|===


// markup not found, no include::{specDir}paths/post_access/operation-responses-end.adoc[opts=optional]

:leveloffset: -1



// markup not found, no include::{specDir}paths/post_access/operation-responses-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_access/operation-security-before.adoc[opts=optional]


[#post_access-security]
= Security

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_access/operation-security-begin.adoc[opts=optional]


[cols="20,80"]
|===
| Type | Name

| http (basic)
| <<security-default>>

|===


// markup not found, no include::{specDir}paths/post_access/operation-security-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_access/operation-security-after.adoc[opts=optional]



include::{snippetDir}post_access/http-request.adoc[opts=optional]


include::{snippetDir}post_access/http-response.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_access/operation-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_access/operation-after.adoc[opts=optional]




// markup not found, no include::{specDir}paths/post_settings/operation-before.adoc[opts=optional]


[#post_settings]
= Update Cluster-Level Query Settings

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_settings/operation-begin.adoc[opts=optional]


....
POST /settings/querySettings
....



// markup not found, no include::{specDir}paths/post_settings/operation-description-before.adoc[opts=optional]


[#post_settings-description]
= Description

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_settings/operation-description-begin.adoc[opts=optional]


[markdown]
--
Updates cluster-level query settings, including the CURL access settings.
--


// markup not found, no include::{specDir}paths/post_settings/operation-description-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_settings/operation-description-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_settings/operation-parameters-before.adoc[opts=optional]


[#post_settings-parameters]
= Parameters

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_settings/operation-parameters-begin.adoc[opts=optional]






[#post_settings-body]
.Body Parameter
{blank}

[cols="20,60,20"]
|===
|Name| Description| Schema

a| *Body* +
_optional_
a| 


[markdown]
--
An object specifying cluster-level query settings.
--

[%hardbreaks]
{blank}

a| <<Settings>>



|===


// markup not found, no include::{specDir}paths/post_settings/operation-parameters-end.adoc[opts=optional]

:leveloffset: -1




// markup not found, no include::{specDir}paths/post_settings/operation-parameters-after.adoc[opts=optional]


[#post_settings-produces]
= Produces

* application/json

[#post_settings-consumes]
= Consumes

* application/json
* application/x-www-form-urlencoded


// markup not found, no include::{specDir}paths/post_settings/operation-responses-before.adoc[opts=optional]


[#post_settings-responses]
= Responses

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_settings/operation-responses-begin.adoc[opts=optional]


[cols="20,60,20"]
|===
| HTTP Code | Description | Schema

| 200
a| [markdown]
--
An object giving cluster-level query settings, including the latest changes.
--
a| <<Settings>>


| 400
a| [markdown]
--
Returns an error message if a parameter or value is incorrect.
--
a| Object



|===


// markup not found, no include::{specDir}paths/post_settings/operation-responses-end.adoc[opts=optional]

:leveloffset: -1



// markup not found, no include::{specDir}paths/post_settings/operation-responses-after.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_settings/operation-security-before.adoc[opts=optional]


[#post_settings-security]
= Security

:leveloffset: +1

// markup not found, no include::{specDir}paths/post_settings/operation-security-begin.adoc[opts=optional]


[cols="20,80"]
|===
| Type | Name

| http (basic)
| <<security-default>>

|===


// markup not found, no include::{specDir}paths/post_settings/operation-security-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_settings/operation-security-after.adoc[opts=optional]



include::{snippetDir}post_settings/http-request.adoc[opts=optional]


include::{snippetDir}post_settings/http-response.adoc[opts=optional]



// markup not found, no include::{specDir}paths/post_settings/operation-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/post_settings/operation-after.adoc[opts=optional]



ifeval::[{count-apis} > 1]
:leveloffset: -1
endif::[]



// markup not found, no include::{specDir}paths/document-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}paths/document-after.adoc[opts=optional]



// markup not found, no include::{specDir}definitions/document-before.adoc[opts=optional]


[#models]
= Definitions

:count-models: 2

:leveloffset: +1

// markup not found, no include::{specDir}definitions/document-begin.adoc[opts=optional]


This section describes the properties consumed and returned by this REST API.

ifeval::[{count-models} > 1]
ifdef::collapse-models[]
[.two-columns]
endif::collapse-models[]
[%hardbreaks]
<<Access>>
<<Settings>>
endif::[]



// markup not found, no include::{specDir}definitions/Access/definition-before.adoc[opts=optional]


ifdef::collapse-models[]
[discrete]
endif::collapse-models[]
[#Access]
= Access

:leveloffset: +1

// markup not found, no include::{specDir}definitions/Access/definition-begin.adoc[opts=optional]


.icon:brackets-curly[fw] Object
{blank}

//tag::Access[]

ifdef::model-descriptions[]
//tag::desc-Access[]
An object which determines which URLs may be accessed by the `CURL()` function.
//end::desc-Access[]
endif::model-descriptions[]

[cols="25,55,20"]
|===
| Property | | Schema

a| 
*all_access* +
_required_
a| 

[markdown]
--
Defines whether the user has access to all URLs, or only URLs specified by the access list.

This field set must be set to `false` to enable the `allowed_urls` and `disallowed_urls` fields.

Setting this field to `true` enables access to all endpoints.

--

[%hardbreaks]
{blank}
a| Boolean


a| 
*allowed_urls* +
_optional_
a| 

[markdown]
--
An array of strings, each of which is a URL to which you wish to grant access.
Each URL is a prefix match.
The CURL() function will allow any URL that starts with this value.

For example, if you wish to allow access to all Google APIs, add the URL `https://maps.googleapis.com` to the array.
To allow complete access to `localhost`, use `http://localhost`.

Note that each URL must include the port, protocol, and all other components of the URL.

--

[%hardbreaks]
{blank}
a| String
 array

a| 
*disallowed_urls* +
_optional_
a| 

[markdown]
--
An array of strings, each of which is a URL that will be restricted for all roles.
Each URL is a prefix match.
The CURL() function will disallow any URL that starts with this value.

If both `allowed_urls` and `disallowed_urls` fields are populated, the `disallowed_urls` field takes precedence over `allowed_urls`.

Note that each URL must include the port, protocol, and all other components of the URL.

--

[%hardbreaks]
{blank}
a| String
 array

|===

//end::Access[]




// markup not found, no include::{specDir}definitions/Access/definition-end.adoc[opts=optional]


:leveloffset: -1

// markup not found, no include::{specDir}definitions/Access/definition-after.adoc[opts=optional]




// markup not found, no include::{specDir}definitions/Settings/definition-before.adoc[opts=optional]


ifdef::collapse-models[]
[discrete]
endif::collapse-models[]
[#Settings]
= Settings

:leveloffset: +1

// markup not found, no include::{specDir}definitions/Settings/definition-begin.adoc[opts=optional]


.icon:brackets-curly[fw] Object
{blank}

//tag::Settings[]


[cols="25,55,20"]
|===
| Property | | Schema

a| [#queryCleanupClientAttempts]
*queryCleanupClientAttempts* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[cleanupclientattempts]: #cleanupclientattempts


endif::alt-markdown-links[]
When enabled, the Query service preferentially aims to clean up just transactions that it has created, leaving transactions for the distributed cleanup process only when it is forced to.

The [node-level][cleanupclientattempts] `cleanupclientattempts` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[cleanupclientattempts]: ../n1ql-rest-admin/index.html#cleanupclientattempts

--

[%hardbreaks]
*Default:* `true`
*Example:* `false`
{blank}
a| Boolean


a| [#queryCleanupLostAttempts]
*queryCleanupLostAttempts* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[cleanuplostattempts]: #cleanuplostattempts


endif::alt-markdown-links[]
When enabled, the Query service takes part in the distributed cleanup process, and cleans up expired transactions created by any client.

The [node-level][cleanuplostattempts] `cleanuplostattempts` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[cleanuplostattempts]: ../n1ql-rest-admin/index.html#cleanuplostattempts

--

[%hardbreaks]
*Default:* `true`
*Example:* `false`
{blank}
a| Boolean


a| [#queryCleanupWindow]
*queryCleanupWindow* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[cleanupwindow]: #cleanupwindow


endif::alt-markdown-links[]
Specifies how frequently the Query service checks its subset of [active transaction records][additional-storage-use] for cleanup.
Decreasing this setting causes expiration transactions to be found more swiftly, with the tradeoff of increasing the number of reads per second used for the scanning process.

The value for this setting is a string.
Its format includes an amount and a mandatory unit, e.g. `10ms` (10 milliseconds) or `0.5s` (half a second).
Valid units are:

* `ns` (nanoseconds)
* `us` (microseconds)
* `ms` (milliseconds)
* `s` (seconds)
* `m` (minutes)
* `h` (hours)

The [node-level][cleanupwindow] `cleanupwindow` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[additional-storage-use]: /server/7.6/learn/data/transactions.html#active-transaction-record-entries
[cleanupwindow]: ../n1ql-rest-admin/index.html#cleanupwindow

--

[%hardbreaks]
*Default:* `pass:c["60s"]`
*Example:* `pass:c["30s"]`
{blank}
a| String (duration)


a| [#queryCompletedLimit]
*queryCompletedLimit* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[completed-limit]: #completed-limit


endif::alt-markdown-links[]
Sets the number of requests to be logged in the completed requests catalog.
As new completed requests are added, old ones are removed.

Increase this when the completed request keyspace is not big enough to track the slow requests, such as when you want a larger sample of slow requests.

Refer to [Configure the Completed Requests][sys-completed-config] for more information and examples.

The [node-level][completed-limit] `completed-limit` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[sys-completed-config]: /server/7.6/manage/monitor/monitoring-n1ql-query.html#sys-completed-config
[completed-limit]: ../n1ql-rest-admin/index.html#completed-limit

--

[%hardbreaks]
*Default:* `4000`
*Example:* `7000`
{blank}
a| Integer (int32)


a| [#queryCompletedMaxPlanSize]
*queryCompletedMaxPlanSize* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[completed-max-plan-size]: #completed-max-plan-size


endif::alt-markdown-links[]
A plan size in bytes.
Limits the size of query execution plans that can be logged in the completed requests catalog.
Values larger than the maximum limit are silently treated as the maximum limit.
Queries with plans larger than this are not logged.
You must obtain execution plans for such queries via profiling or using the EXPLAIN statement.

Refer to [Configure the Completed Requests][sys-completed-config] for more information.

The [node-level][completed-max-plan-size] `completed-max-plan-size` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[sys-completed-config]: /server/7.6/manage/monitor/monitoring-n1ql-query.html#sys-completed-config
[completed-max-plan-size]: ../n1ql-rest-admin/index.html#completed-max-plan-size

--

[%hardbreaks]
*Default:* `262144`
*Minimum:* `0`
*Maximum:* `20840448`
{blank}
a| Integer (int32)


a| [#queryCompletedThreshold]
*queryCompletedThreshold* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[completed-threshold]: #completed-threshold


endif::alt-markdown-links[]
A duration in milliseconds.
All completed queries lasting longer than this threshold are logged in the completed requests catalog.

Specify `0` to track all requests, independent of duration.
Specify any negative number to track none.

Refer to [Configure the Completed Requests][sys-completed-config] for more information and examples.

The [node-level][completed-threshold] `completed-threshold` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[sys-completed-config]: /server/7.6/manage/monitor/monitoring-n1ql-query.html#sys-completed-config
[completed-threshold]: ../n1ql-rest-admin/index.html#completed-threshold

--

[%hardbreaks]
*Default:* `1000`
*Example:* `7000`
{blank}
a| Integer (int32)


a| [#queryLogLevel]
*queryLogLevel* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[loglevel]: #loglevel


endif::alt-markdown-links[]
Log level used in the logger.

All values, in descending order of data:

* `DEBUG` &mdash; For developers.
Writes everything.

* `TRACE` &mdash; For developers.
Less info than `DEBUG`.

* `INFO` &mdash; For admin & customers.
Lists warnings & errors.

* `WARN` &mdash; For admin.
Only abnormal items.

* `ERROR` &mdash; For admin.
Only errors to be fixed.

* `SEVERE` &mdash; For admin.
Major items, like crashes.

* `NONE` &mdash; Doesn't write anything.

The [node-level][loglevel] `loglevel` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[loglevel]: ../n1ql-rest-admin/index.html#loglevel

--

[%hardbreaks]
*Values:* `"DEBUG"`, `"TRACE"`, `"INFO"`, `"WARN"`, `"ERROR"`, `"SEVERE"`, `"NONE"`
*Default:* `pass:c["INFO"]`
*Example:* `pass:c["DEBUG"]`
{blank}
a| String


a| [#queryMaxParallelism]
*queryMaxParallelism* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[max-parallelism-srv]: #max-parallelism-srv
[max_parallelism_req]: #max_parallelism_req


endif::alt-markdown-links[]
Specifies the maximum parallelism for queries on all Query nodes in the cluster.

If the value is zero or negative, the maximum parallelism is restricted to the number of allowed cores.
Similarly, if the value is greater than the number of allowed cores, the maximum parallelism is restricted to the number of allowed cores.

(The number of allowed cores is the same as the number of logical CPUs.
In Community Edition, the number of allowed cores cannot be greater than 4.
In Enterprise Edition, there is no limit to the number of allowed cores.)

The [node-level][max-parallelism-srv] `max-parallelism` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, there is a [request-level][max_parallelism_req] `max_parallelism` parameter.
If a request includes this parameter, it will be capped by the node-level `max-parallelism` setting.

NOTE: To enable queries to run in parallel, you must specify the cluster-level `queryMaxParallelism` parameter, or specify the node-level `max-parallelism` parameter on all Query nodes.

Refer to [Max Parallelism][max-parallelism] for more information.

[max-parallelism]: /server/7.6/n1ql/n1ql-language-reference/index-partitioning.html#max-parallelism
[max-parallelism-srv]: ../n1ql-rest-admin/index.html#max-parallelism-srv
[max_parallelism_req]: ../n1ql-rest-query/index.html#max_parallelism_req

--

[%hardbreaks]
*Default:* `1`
*Example:* `0`
{blank}
a| Integer (int32)


a| [#queryMemoryQuota]
*queryMemoryQuota* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[memory-quota-srv]: #memory-quota-srv
[memory_quota_req]: #memory_quota_req


endif::alt-markdown-links[]
Specifies the maximum amount of memory a request may use on any Query node in the cluster, in MB.

This parameter enforces a ceiling on the memory used for the tracked documents required for processing a request.
It does not take into account any other memory that might be used to process a request, such as the stack, the operators, or some intermediate values.

Within a transaction, this setting enforces the memory quota for the transaction by tracking the
delta table and the transaction log (approximately).

The [node-level][memory-quota-srv] `memory-quota` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, there is a [request-level][memory_quota_req] `memory_quota` parameter.
If a request includes this parameter, it will be capped by the node-level `memory-quota` setting.

[memory-quota-srv]: ../n1ql-rest-admin/index.html#memory-quota-srv
[memory_quota_req]: ../n1ql-rest-query/index.html#memory_quota_req

--

[%hardbreaks]
*Default:* `0`
*Example:* `4`
{blank}
a| Integer (int32)


a| [#queryN1qlFeatCtrl]
*queryN1qlFeatCtrl* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[n1ql-feat-ctrl]: #n1ql-feat-ctrl


endif::alt-markdown-links[]
SQL++ feature control.
This setting is provided for technical support only.

The [node-level][n1ql-feat-ctrl] `n1ql-feat-ctrl` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[n1ql-feat-ctrl]: ../n1ql-rest-admin/index.html#n1ql-feat-ctrl

--

[%hardbreaks]
{blank}
a| Integer (int32)


a| [#queryNodeQuota]
*queryNodeQuota* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[node-quota]: #node-quota


endif::alt-markdown-links[]
Sets the soft memory limit for every Query node in the cluster, in MB.
The garbage collector tries to keep below this target.
It is not a hard, absolute limit, and memory usage may exceed this value.

When set to `0` (the default), there is no soft memory limit.

The [node-level][node-quota] `node-quota` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[node-quota]: ../n1ql-rest-admin/index.html#node-quota

--

[%hardbreaks]
*Default:* `0`
{blank}
a| Integer (int32)


a| [#queryNodeQuotaValPercent]
*queryNodeQuotaValPercent* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[node-quota-val-percent]: #node-quota-val-percent


endif::alt-markdown-links[]
The percentage of the `queryNodeQuota` that is dedicated to tracked value content memory across all active requests for every Query node in the cluster.
(The `queryMemoryQuota` setting specifies the maximum amount of document memory an individual request may use on any Query node in the cluster.)

The [node-level][node-quota-val-percent] `node-quota-val-percent` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[node-quota-val-percent]: ../n1ql-rest-admin/index.html#node-quota-val-percent

--

[%hardbreaks]
*Default:* `67`
*Minimum:* `0`
*Maximum:* `100`
{blank}
a| Integer (int32)


a| [#queryNumAtrs]
*queryNumAtrs* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[numatrs-srv]: #numatrs-srv
[numatrs_req]: #numatrs_req


endif::alt-markdown-links[]
Specifies the total number of [active transaction records][additional-storage-use] for all Query nodes in the cluster.

The [node-level][numatrs-srv] `numatrs` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, there is a [request-level][numatrs_req] `numatrs` parameter.
If a request includes this parameter, it will be capped by the node-level `numatrs` setting.

[additional-storage-use]: /server/7.6/learn/data/transactions.html#active-transaction-record-entries
[numatrs-srv]: ../n1ql-rest-admin/index.html#numatrs-srv
[numatrs_req]: ../n1ql-rest-query/index.html#numatrs_req

--

[%hardbreaks]
*Default:* `1024`
*Minimum:* `0`
*Exclusive minimum:* `true`
*Example:* `512`
{blank}
a| Integer (int32)


a| [#queryNumCpus]
*queryNumCpus* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[num-cpus]: #num-cpus


endif::alt-markdown-links[]
The number of CPUs the Query service can use on any Query node in the cluster.
Note that this setting requires a restart of the Query service to take effect.

When set to `0` (the default), the Query service can use all available CPUs, up to the limits described below.

The number of CPUs can never be greater than the number of logical CPUs.
In Community Edition, the number of allowed CPUs cannot be greater than 4.
In Enterprise Edition, there is no limit to the number of allowed CPUs.

The [node-level][num-cpus] `num-cpus` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[num-cpus]: ../n1ql-rest-admin/index.html#num-cpus

--

[%hardbreaks]
*Default:* `0`
{blank}
a| Integer (int32)


a| [#queryPipelineBatch]
*queryPipelineBatch* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[pipeline-batch-srv]: #pipeline-batch-srv
[pipeline_batch_req]: #pipeline_batch_req


endif::alt-markdown-links[]
Controls the number of items execution operators can batch for Fetch from the KV.

The [node-level][pipeline-batch-srv] `pipeline-batch` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][pipeline_batch_req] `pipeline_batch` parameter specifies this property per request.
The minimum of that and the node-level `pipeline-batch` setting is applied.

[pipeline-batch-srv]: ../n1ql-rest-admin/index.html#pipeline-batch-srv
[pipeline_batch_req]: ../n1ql-rest-query/index.html#pipeline_batch_req

--

[%hardbreaks]
*Default:* `16`
*Example:* `64`
{blank}
a| Integer (int32)


a| [#queryPipelineCap]
*queryPipelineCap* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[pipeline-cap-srv]: #pipeline-cap-srv
[pipeline_cap_req]: #pipeline_cap_req


endif::alt-markdown-links[]
Maximum number of items each execution operator can buffer between various operators.

The [node-level][pipeline-cap-srv] `pipeline-cap` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][pipeline_cap_req] `pipeline_cap` parameter specifies this property per request.
The minimum of that and the node-level `pipeline-cap` setting is applied.

[pipeline-cap-srv]: ../n1ql-rest-admin/index.html#pipeline-cap-srv
[pipeline_cap_req]: ../n1ql-rest-query/index.html#pipeline_cap_req

--

[%hardbreaks]
*Default:* `512`
*Example:* `1024`
{blank}
a| Integer (int32)


a| [#queryPreparedLimit]
*queryPreparedLimit* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[prepared-limit]: #prepared-limit


endif::alt-markdown-links[]
Maximum number of prepared statements in the cache.
When this cache reaches the limit, the least recently used prepared statements will be discarded as new prepared statements are created.

The [node-level][prepared-limit] `prepared-limit` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

[prepared-limit]: ../n1ql-rest-admin/index.html#prepared-limit

--

[%hardbreaks]
*Default:* `16384`
*Example:* `65536`
{blank}
a| Integer (int32)


a| [#queryScanCap]
*queryScanCap* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[scan-cap-srv]: #scan-cap-srv
[scan_cap_req]: #scan_cap_req


endif::alt-markdown-links[]
Maximum buffered channel size between the indexer client and the query service for index scans.
This parameter controls when to use scan backfill.

Use `0` or a negative number to disable.
Smaller values reduce GC, while larger values reduce indexer backfill.

The [node-level][scan-cap-srv] `scan-cap` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][scan_cap_req] `scan_cap` parameter specifies this property per request.
The minimum of that and the node-level `scan-cap` setting is applied.

[scan-cap-srv]: ../n1ql-rest-admin/index.html#scan-cap-srv
[scan_cap_req]: ../n1ql-rest-query/index.html#scan_cap_req

--

[%hardbreaks]
*Default:* `512`
*Example:* `1024`
{blank}
a| Integer (int32)


a| [#queryTimeout]
*queryTimeout* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[timeout-srv]: #timeout-srv
[timeout_req]: #timeout_req


endif::alt-markdown-links[]
Maximum time to spend on the request before timing out (ns).

The value for this setting is an integer, representing a duration in nanoseconds.
It must not be delimited by quotes, and must not include a unit.

Specify `0` (the default value) or a negative integer to disable.
When disabled, no timeout is applied and the request runs for however long it takes.

The [node-level][timeout-srv] `timeout` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][timeout_req] `timeout` parameter specifies this property per request.
The minimum of that and the node-level `timeout` setting is applied.

[timeout-srv]: ../n1ql-rest-admin/index.html#timeout-srv
[timeout_req]: ../n1ql-rest-query/index.html#timeout_req

--

[%hardbreaks]
*Default:* `0`
*Example:* `500000000`
{blank}
a| Long (int64)


a| [#queryTxTimeout]
*queryTxTimeout* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[tximplicit]: #tximplicit
[txtimeout-srv]: #txtimeout-srv
[txtimeout_req]: #txtimeout_req


endif::alt-markdown-links[]
Maximum time to spend on a transaction before timing out.
This setting only applies to requests containing the `BEGIN TRANSACTION` statement, or to requests where the [tximplicit][tximplicit] parameter is set.
For all other requests, it is ignored.

The value for this setting is a string.
Its format includes an amount and a mandatory unit, e.g. `10ms` (10 milliseconds) or `0.5s` (half a second).
Valid units are:

* `ns` (nanoseconds)
* `us` (microseconds)
* `ms` (milliseconds)
* `s` (seconds)
* `m` (minutes)
* `h` (hours)

Specify `0ms` (the default value) to disable.
When disabled, no timeout is applied and the transaction runs for however long it takes.

The [node-level][txtimeout-srv] `txtimeout` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, there is a [request-level][txtimeout_req] `txtimeout` parameter.
If a request includes this parameter, it will be capped by the node-level `txtimeout` setting.

[tximplicit]: ../n1ql-rest-query/index.html#tximplicit
[txtimeout-srv]: ../n1ql-rest-admin/index.html#txtimeout-srv
[txtimeout_req]: ../n1ql-rest-query/index.html#txtimeout_req

--

[%hardbreaks]
*Default:* `pass:c["0ms"]`
*Example:* `pass:c["0.5s"]`
{blank}
a| String (duration)


a| [#queryTmpSpaceDir]
*queryTmpSpaceDir* +
_optional_
a| 

[markdown]
--
The path to which the indexer writes temporary backfill files, to store any transient data during query processing.

The specified path must already exist.
Only absolute paths are allowed.

The default path is `var/lib/couchbase/tmp` within the Couchbase Server installation directory.

--

[%hardbreaks]
*Example:* `pass:c["/opt/couchbase/var/lib/couchbase/tmp"]`
{blank}
a| String


a| [#queryTmpSpaceSize]
*queryTmpSpaceSize* +
_optional_
a| 

[markdown]
--
The maximum size of temporary backfill files (MB).

Setting the size to `0` disables backfill.
Setting the size to `-1` means the size is unlimited.

The maximum size is limited only by the available disk space.

--

[%hardbreaks]
*Default:* `5120`
*Example:* `2048`
{blank}
a| Integer (int32)


a| [#queryUseCBO]
*queryUseCBO* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[use-cbo-srv]: #use-cbo-srv
[use_cbo_req]: #use_cbo_req


endif::alt-markdown-links[]
Specifies whether the cost-based optimizer is enabled.

The [node-level][use-cbo-srv] `use-cbo` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][use_cbo_req] `use_cbo` parameter specifies this property per request.
If a request does not include this parameter, the node-level setting is used, which defaults to `true`.

[use-cbo-srv]: ../n1ql-rest-admin/index.html#use-cbo-srv
[use_cbo_req]: ../n1ql-rest-query/index.html#use_cbo_req

--

[%hardbreaks]
*Default:* `true`
*Example:* `false`
{blank}
a| Boolean


a| [#queryUseReplica]
*queryUseReplica* +
_optional_
a| 

[markdown]
--
ifdef::alt-markdown-links[]
[use-replica-srv]: #use-replica-srv
[use_replica_req]: #use_replica_req


endif::alt-markdown-links[]
Specifies whether a query can fetch data from a replica vBucket if active vBuckets are inaccessible.
The possible values are:

* `off` &mdash; read from replica is disabled for all queries and cannot be overridden at request level.

* `on` &mdash; read from replica is enabled for all queries, but can be disabled at request level.

* `unset` &mdash; read from replica is enabled or disabled at request level.

The [node-level][use-replica-srv] `use-replica` setting specifies this property for a single node.
When you change the cluster-level setting, the node-level setting is over-written for all nodes in the cluster.

In addition, the [request-level][use_replica_req] `use_replica` parameter specifies this property per request.
If a request does not include this parameter, or if the request-level parameter is `unset`, the node-level setting is used.
If the request-level parameter and the node-level setting are both `unset`, read from replica is disabled for that request.

Do not enable read from replica when you require consistent results.
Only SELECT queries that are not within a transaction can read from replica.

Reading from replica is only possible if the cluster uses Couchbase Server 7.6.0 or later.

Note that KV range scans cannot currently be started on a replica vBucket.
If a query uses sequential scan and a data node becomes unavailable, the query might return an error, even if read from replica is enabled for the request.

[use-replica-srv]: ../n1ql-rest-admin/index.html#use-replica-srv
[use_replica_req]: ../n1ql-rest-query/index.html#use_replica_req

--

[%hardbreaks]
*Values:* `"off"`, `"on"`, `"unset"`
*Default:* `pass:c["unset"]`
*Example:* `pass:c["on"]`
{blank}
a| String


a| [#queryCurlWhitelist]
*queryCurlWhitelist* +
_optional_
a| 

[markdown]
--
include::index.adoc[tag=desc-Access, opts=optional]
--

[%hardbreaks]
{blank}
a| <<Access>>


|===

//end::Settings[]




// markup not found, no include::{specDir}definitions/Settings/definition-end.adoc[opts=optional]


:leveloffset: -1

// markup not found, no include::{specDir}definitions/Settings/definition-after.adoc[opts=optional]




// markup not found, no include::{specDir}definitions/document-end.adoc[opts=optional]


:leveloffset: -1

// markup not found, no include::{specDir}definitions/document-after.adoc[opts=optional]



// markup not found, no include::{specDir}security/document-before.adoc[opts=optional]


[[security]]
= Security

:leveloffset: +1

include::{specDir}security/document-begin.adoc[opts=optional]




// markup not found, no include::{specDir}security/Default/security-scheme-before.adoc[opts=optional]


[[security-default]]
= Default

:leveloffset: +1

// markup not found, no include::{specDir}security/Default/security-scheme-begin.adoc[opts=optional]


[markdown]
--
Users must have one of the following RBAC roles:

* Full Admin
* Cluster Admin
--

[%hardbreaks]
__Type__ : http


// markup not found, no include::{specDir}security/Default/security-scheme-end.adoc[opts=optional]

:leveloffset: -1


// markup not found, no include::{specDir}security/Default/security-scheme-after.adoc[opts=optional]




include::{specDir}security/document-end.adoc[opts=optional]

:leveloffset: -1



include::{specDir}security/document-after.adoc[opts=optional]

